<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <script src="js/config.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Contato - Escola Antônio Austregésio</title>
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body>
    <header>
        <div class="menu-superior">
            <img src="imagens/transferir.jpg" alt="Transferir" class="menu-img">
            <h1 class="menu-titulo">Antônio Austregésio</h1>
            <img src="imagens/fundoMenu.png" alt="Prefeitura do Rio de Janeiro" class="menu-img">
        </div>
        <nav aria-label="Menu principal">
            <button id="menu-btn" aria-label="Abrir menu" class="menu-btn">
                <span></span><span></span><span></span>
            </button>
            <ul id="menu-list">
                <li><a href="index.html">Início</a></li>
                <li><a href="quem-somos.html">Quem Somos</a></li>
                <li><a href="professores.html">Professores</a></li>
                <li><a href="avisos.html">Avisos</a></li>
                <li><a href="galeria.html">Galeria</a></li>
                <li><a href="contato.html">Contato</a></li>
                <li><a href="admin.html">Admin</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="contato">
            <h2>Fale Conosco</h2>
            <form id="form-contato">
                <input type="text" name="nome" placeholder="Seu nome" required />
                <input type="email" name="email" placeholder="Seu e-mail" required />
                <textarea name="mensagem" rows="4" placeholder="Sua mensagem" required></textarea>
                <div class="g-recaptcha" data-sitekey="6LfPO-krAAAAAGqHieXJaL5A2IQsdH_LInl9Bs34"></div>
                <button type="submit">Enviar</button>
            </form>
            <div class="contato-info">
                <strong>WhatsApp:</strong> <a href="https://wa.me/5588999999999" target="_blank">Clique aqui</a><br>
                <strong>E-mail:</strong> contato@escolaaustregesio.com.br<br>
                <strong>Endereço:</strong> Rua das Flores, 123 - Centro, Cidade/UF
            </div>
            <div id="msg-contato"></div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Escola Antônio Austregésio</p>
    </footer>
    <script>
        // Menu hambúrguer responsivo
        const menuBtn = document.getElementById('menu-btn');
        const menuList = document.getElementById('menu-list');
        menuBtn.addEventListener('click', () => {
            menuList.classList.toggle('show');
        });

        // Função para mostrar alerta estilizado
        function mostrarAlertaContato(msg, tipo = 'sucesso') {
            const msgDiv = document.getElementById('msg-contato');
            msgDiv.innerHTML = `
        <div class="alert-overlay"></div>
        <div class="alert-contato ${tipo === 'sucesso' ? '' : 'alert-erro'}" tabindex="0">
            <button class="alert-close" aria-label="Fechar aviso" onclick="fecharAlertaContato()">&times;</button>
            <span class="alert-msg">${msg}</span>
        </div>
    `;
            document.querySelector('.alert-contato').focus();
            document.body.style.overflow = 'hidden';
        }

        function fecharAlertaContato() {
            document.getElementById('msg-contato').innerHTML = '';
            document.body.style.overflow = '';
        }

        document.addEventListener('DOMContentLoaded', function () {
            const form = document.getElementById('form-contato');
            form.addEventListener('submit', function (e) {
                e.preventDefault();
                const nome = this.nome.value;
                const email = this.email.value;
                const mensagem = this.mensagem.value;
                const recaptchaToken = grecaptcha.getResponse();

                if (!recaptchaToken) {
                    mostrarAlertaContato('Por favor, marque o reCAPTCHA.', 'erro');
                    return;
                }

                fetch(`${API_URL}/contato`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ nome, email, mensagem, recaptchaToken })
                })
                    .then(res => res.json())
                    .then(data => {
                        if (data.success) {
                            form.reset();
                            grecaptcha.reset();
                            setTimeout(() => {
                                mostrarAlertaContato('Mensagem enviada! Em breve entraremos em contato.', 'sucesso');
                            }, 100);
                        } else {
                            mostrarAlertaContato(data.error || 'Erro ao enviar mensagem. Tente novamente.', 'erro');
                        }
                    })
                    .catch(() => {
                        mostrarAlertaContato('Erro ao enviar mensagem. Tente novamente.', 'erro');
                    });
            });
        });
    </script>
</body>

</html>