<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <script src="js/config.js"></script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description"
        content="Site oficial da Escola Antonio Austreg√©sio. Informa√ß√µes sobre matr√≠culas, avisos, professores e eventos." />
    <title>Escola Antonio Austreg√©sio</title>
    <link rel="stylesheet" href="css/style.css" />  
</head>

<body>
    <header>
        <div class="menu-superior">
            <img src="imagens/transferir.jpg" alt="Transferir" class="menu-img">
            <h1 class="menu-titulo">Antonio Austreg√©sio</h1>
            <img src="imagens/fundoMenu.png" alt="Prefeitura do Rio de Janeiro" class="menu-img">
        </div>
        <nav aria-label="Menu principal">
            <button id="menu-btn" aria-label="Abrir menu" class="menu-btn">
                <span></span><span></span><span></span>
            </button>
            <ul id="menu-list">
                <li><a href="index.html">In√≠cio</a></li>
                <li><a href="quem-somos.html">Quem Somos</a></li>
                <li><a href="professores.html">Professores</a></li>
                <li><a href="avisos.html">Avisos</a></li>
                <li><a href="galeria.html">Galeria</a></li>
                <li><a href="contato.html">Contato</a></li>
                <li><a href="admin.html">Admin</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <section class="info-rapida">
            <span class="icon">üì¢</span>
            <div>
                <strong>Matr√≠culas abertas para 2025!</strong><br>
                Venha conhecer nossa escola, agende uma visita pelo WhatsApp:
                <a href="https://wa.me/5588999999999" target="_blank"
                    style="color:#0059b3;text-decoration:underline;">Clique aqui</a><br>
                Endere√ßo: Rua das Flores, 123 - Centro, Cidade/UF
            </div>
        </section>
        <section class="destaques" aria-labelledby="destaques">
            <h3 id="destaques">Destaques</h3>
            <div class="destaque-cards" id="destaque-cards"></div>
        </section>
        <section class="videos">
            <h3>V√≠deos da Escola</h3>
            <div class="video-grid" id="video-grid"></div>
        </section>
        <section class="depoimentos">
            <h3>Depoimentos</h3>
            <div class="depoimento">"A escola mudou a vida do meu filho, s√≥ tenho a agradecer!"<br><strong>- Maria, m√£e
                    de aluno</strong></div>
            <div class="depoimento">"Aqui aprendi a ser cidad√£o e a sonhar alto."<br><strong>- Jo√£o, ex-aluno</strong>
            </div>
            <div class="depoimento">"Equipe dedicada e ambiente acolhedor."<br><strong>- Ana, professora</strong></div>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Escola Antonio Austreg√©sio</p>
    </footer>
    <script>
        // Menu hamb√∫rguer responsivo
        const menuBtn = document.getElementById('menu-btn');
        const menuList = document.getElementById('menu-list');
        menuBtn.addEventListener('click', () => {
            menuList.classList.toggle('show');
        });
        document.addEventListener('click', function (e) {
            if (window.innerWidth <= 900 && !menuBtn.contains(e.target) && !menuList.contains(e.target)) {
                menuList.classList.remove('show');
            }
        });

        // Destaques din√¢micos
        fetch(`${API_URL}/destaques`)
            .then(res => res.json())
            .then(destaques => {
                const lista = document.getElementById('destaque-cards');
                lista.innerHTML = '';
                const icons = ['üéâ', 'üìÖ', '‚≠ê', 'üì¢', 'üè´', 'üìù', 'üéì', 'üèÜ', 'üì∑', 'üí°'];
                destaques.forEach((item, idx) => {
                    const li = document.createElement('div');
                    li.className = 'card-destaque';

                    const iconElem = document.createElement('span');
                    iconElem.textContent = icons[idx % icons.length];
                    iconElem.className = 'icon';
                    li.appendChild(iconElem);

                    const textoElem = document.createElement('span');
                    textoElem.textContent = item.texto;
                    li.appendChild(textoElem);

                    lista.appendChild(li);
                });
            });
        fetch(`${API_URL}/videos`)
            .then(res => res.json())
            .then(videos => {
                const grid = document.getElementById('video-grid');
                // Adicione os v√≠deos fixos do YouTube
                const videosFixos = [
                    //"2Vv-BfVoq4g",
                    //"3fumBcKC6RE",
                    //"5qap5aO4i9A"
                ];
                videosFixos.forEach(id => {
                    const iframe = document.createElement('iframe');
                    iframe.src = `https://www.youtube.com/embed/${id}`;
                    iframe.title = "V√≠deo Institucional";
                    iframe.allowFullscreen = true;
                    grid.appendChild(iframe);
                });

                // Adicione os v√≠deos cadastrados pelo admin
                videos.forEach(video => {
                    if (video.url.includes('youtube.com') || video.url.includes('youtu.be')) {
                        // YouTube embed
                        const youtubeId = extrairIdYoutube(video.url);
                        if (youtubeId) {
                            const iframe = document.createElement('iframe');
                            iframe.src = `https://www.youtube.com/embed/${youtubeId}`;
                            iframe.title = video.nome;
                            iframe.allowFullscreen = true;
                            grid.appendChild(iframe);
                        }
                    } else {
                        // V√≠deo enviado
                        const videoElem = document.createElement('video');
                        videoElem.src = video.url;
                        videoElem.controls = true;
                        videoElem.style = "width:320px;height:180px;border-radius:10px;box-shadow:0 2px 8px #0001;background:#000;margin:8px 0;";
                        grid.appendChild(videoElem);
                    }
                });
            });

        // Fun√ß√£o para extrair ID do YouTube
        function extrairIdYoutube(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);
            return (match && match[2].length === 11) ? match[2] : '';
        }
    </script>
</body>

</html>